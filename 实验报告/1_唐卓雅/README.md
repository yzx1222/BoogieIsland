# [ 中传放心传 ]个人技术总结报告

###### 2023/07/18-2023/07/26
###### tzy-ceceliaroquee
###### 布吉岛组
---

__<font color=red>！由于上传文件到GitHub时一直提醒我子模块改动而无法打开文件夹的情况，试了多种办法仍然无法解决，因此删除多余文件，只留实现功能的文件重新上传</font>__

__流程和每部分对应的文件可以看 *flow.md*__

---

## 负责任务及完成情况
- [X] 基于网页的文件上传加密与数字签名系统
  - [X] 限制文件大小：小于 10MB
  - [X] 限制文件类型：office文档、常见图片类型
  - [X] 匿名用户禁止上传文件
  - [X] 对文件进行对称加密存储到文件系统，禁止明文存储文件 【 对称加密 密钥管理（如何安全存储对称加密密钥） 对称加密密文的PADDING问题 】
- [X] 基于网页的加密文件下载与解密
  - [X] 提供匿名用户加密后文件和关联的数字签名文件的下载
  - [X] 客户端对下载后的文件可以解密还原到原始文件 【 对称解密 密钥管理 】
  - [X] 提供已登录用户解密后文件下载

---

## 工作拆分及主要思路   

### <table><tr><td bgcolor=d0dfe0>一、文件上传</td></tr></table>

+ __限制文件大小和类型：__
  - 在前端，使用HTML的`accept`属性来指定允许上传的文件类型`accept=".doc,.docx,.ppt,.pptx,.pdf,.png,.jpg,.jpeg"`
  - 在后端，针对上传文件的处理，验证文件大小是否满足要求，如果不满足则返回错误信息。__<font color=red size=2>限制大小为15M，因为加密后会产生冗余</font>__

+ __禁止匿名用户上传文件：__
  - 在后端，使用`jwt_required`修饰符保证登录状态

+ __对文件进行对称加密存储到文件系统：__ 
  - 在前端，选择适当的加密算法和密钥管理方式，先用随机生成的加密密钥加密文件，再加密对称密钥 __<font size=2>（这里使用AES-ECB,MaksterKey，确保对称加密的安全性。)</font>__
  - 在后端，接收上传的文件,和加密后的对称密钥，将加密后的文件存储到数据库中。

+ __禁止明文存储文件：__  *【 对称加密 密钥管理（如何安全存储对称加密密钥） 对称加密密文的PADDING问题 】*
  


### <table><tr><td bgcolor=d0dfe0>二、文件下载</td></tr></table>

+ __提供匿名用户加密后文件和关联的数字签名文件的下载__       
  - 客户端对下载后的文件可以解密还原到原始文件  *【 对称解密 密钥管理 】*      
    - 在前端先解密得到对称密钥
    - 在前端使用对称密钥解密文件

+ __提供已登录用户解密后文件下载__   
  - 与上传一致，先进行登录状态验证，然后先解密得到对称密钥，再使用对称密钥解密文件，解密后创建下载链接

---

## 自认有技术含量的工作   

+ __完成的功能及其实现的技术__   

| 前/后端 | 功能 | 用于实现的技术 |    
| --- | --- | --- |    
| 前端 | 加密文件 | 使用Crypto.getRandomValues()随机生成对称密钥用于加密 |
| 前端 | 加密对称密钥 | AES-ECB,Master Key |
| 前端、后端 | 前端发送后端存储 | 创建路由接收并处理 |
| 后端 | 发送加密后文件 | 也是通过路由与前端相连 |
| 前端 | 解密对称密钥 | AES-ECB，Master Key |
| 前端 | 解密文件 | 对称密钥 |

+ __其他的一些__    

  - Crypto相关库的使用



---

## 遇到的印象深刻的问题

+ ~~其实感觉处处都是印象深刻的问题~~ ~~主要还是我太菜了~~ ~~私计算机语本当不上手~~
+ 基本上算是从零开始，前期学习 __搭建Vue项目__ 、__如何与Flask App连接起来并发送数据__ 对我来说印象还是挺深刻的 *~~并且常见报错基本上都踩了一遍^^~~*
+ 关于实现禁止匿名用户上传文件，__使用Flask-JWT-Extended来实现JWT认证__
+ __使用CryptoJS进行AES加密__ 

---

## 个人感悟及总结     

+ 通过本次小学期实践作业，我初步理解了flask+vue实现前后端分离的开发框架，也在编写代码、搜寻资料以及解决问题等方面得到了很深刻的锻炼
+ 在团队协作方面，我也有了进一步的认知，能够更高效地与同组其他同学进行沟通和交流

---

## 参考资料

[1] [介绍 JSON](http://www.json.org/json-zh.html)           
[2] [Vue.js](https://cn.vuejs.org/guide/introduction.html)           
[3] [前端上传文件及进行文件类型大小限制](https://www.jianshu.com/p/0b8c3bc49024)           
[4] [如何将前端Vue3和后端Flask App连接起来并发送数据](https://blog.csdn.net/bradyM/article/details/127055497)          
[5] [python flask 框架实现jwt用户登录 接口权限认证 案例](https://blog.csdn.net/t8116189520/article/details/122673112) 
[6] [使用CryptoJS进行AES加密](https://blog.csdn.net/qq_40140218/article/details/86032802)


