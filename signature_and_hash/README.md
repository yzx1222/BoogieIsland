# 数字签名及完整性验证

- 程序功能：对文件进行数字签名及验证（包括验证完整性）

- 运行环境：python3.10、cryptography==38.0.4
  
- 运行方法：进入signature_and_hash目录，运行main.py

## 一、 重要函数

1. `generate_rsa_key_pair()`
   
- 功能：用于生成`RSA`密钥对，并将私钥和公钥保存到两个不同的PEM文件中

- 公共指数：65537
- 密钥长度：2048
- 编码方式：`PEM`
- 私钥格式：`PKCS8`
- 是否加密私钥：否
- 公钥格式：`SubjectPublicKeyInfo`

2. `calculate_hash()`

- 功能：用`SHA256`算法生成文件哈希值

- 输入：文件路径

- 算法描述：创建哈希对象用于存储哈希值，每次读取4096字节大小的块，计算哈希值后将其更新到哈希对象中

3. `sign_data()`

- 功能：供发送方用私钥对文件签名

- 输入：私钥对象、哈希值

- 签名算法：`SHA256`

- 填充方案：`PSS`

4. `verify_signature()`

- 功能：供接收方使用公钥对接收的文件验证签名

- 输入：公钥对象、接收到文件的数字签名、对接收到文件重新计算得到的哈希值

- 描述：调用`public_key.verify()`方法，若验证失败，即验证过程代码不能成功执行，则抛出异常：Signature is invalid






